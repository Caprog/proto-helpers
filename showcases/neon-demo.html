<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Libs Showcase</title>
    <style>
        body {
            margin: 0;
            background: #051008;
            overflow: hidden;
            font-family: 'Segoe UI', sans-serif;
        }

        #canvas-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            perspective: 1000px;
        }

        #target-object {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, rgba(0, 255, 100, 0.1), rgba(0, 100, 255, 0.1));
            border: 2px solid #00ff66;
            box-shadow: 0 0 50px rgba(0, 255, 100, 0.2);
            transition: all 0.1s ease-out;
            position: relative;
            transform-style: preserve-3d;
        }

        #target-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #00ff66;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 255, 100, 0.8);
            pointer-events: none;
            width: 100%;
        }

        .helper-text {
            position: absolute;
            bottom: 30px;
            width: 100%;
            text-align: center;
            color: #00ff66;
            opacity: 0.5;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            pointer-events: none;
        }
    </style>
</head>

<body>

    <div id="canvas-container">
        <div id="target-object">
            <div id="target-inner">NEON</div>
        </div>
    </div>

    <div class="helper-text">USE THE PANEL TO CONTROL THE SCENE</div>

    <!-- MODULE IMPORTS -->
    <script type="module">
        import { GuiLib } from '../libs/neon-form.js';
        import { NeonNotifications } from '../libs/neon-notifications.js';

        // --- INITIALIZATION ---
        // 1. Notifications
        const notify = new NeonNotifications({
            position: 'top-right',
            duration: 3000
        });

        // --- APP STATE ---
        const DEFAULT_SETTINGS = {
            title: 'NEON',
            visible: true,
            scale: 1.0,
            rotationSpeed: 1.0,
            color: '#00ff66',
            borderColor: '#00ff66',
            glowStrength: 20,
            wireframe: false,

            // Notifications
            notifDuration: 3000,
            notifPos: 'top-right'
        };

        // 2. GUI
        const gui = new GuiLib();
        gui.enableManagement({
            // Ref to what we want to save
            settings: { ...DEFAULT_SETTINGS }
        }, 'neon_showcase_config', () => {
            // simple reload callback if needed, but we bind directly to object usually
            applySettings();
        });

        // Working copu
        const settings = { ...DEFAULT_SETTINGS };

        // --- GUI SETUP ---

        // FOLDER: OBJECT CONTROL
        gui.addFolder("Object Control");

        gui.addText(settings, 'title', { name: "Label Text" }).onChange(v => {
            document.getElementById('target-inner').innerText = v;
        });

        gui.addBoolean(settings, 'visible', { name: "Visible" }).onChange(v => {
            document.getElementById('target-object').style.opacity = v ? 1 : 0;
        });

        gui.addSlider(settings, 'scale', { min: 0.1, max: 3.0, step: 0.1, name: "Scale" })
            .onChange(applySettings);

        gui.addSlider(settings, 'rotationSpeed', { min: 0, max: 5.0, step: 0.1, name: "Auto Rotate" });

        gui.addColor(settings, 'color', { name: "Inner Color" }).onChange(applySettings);
        gui.addColor(settings, 'borderColor', { name: "Border Color" }).onChange(applySettings);

        gui.addSlider(settings, 'glowStrength', { min: 0, max: 100, name: "Glow (px)" }).onChange(applySettings);

        // FOLDER: NOTIFICATIONS
        gui.addFolder("Notifications");

        gui.addSelect(settings, 'notifPos', {
            name: "Position",
            options: {
                "Top Right": "top-right",
                "Top Left": "top-left",
                "Bottom Right": "bottom-right",
                "Bottom Left": "bottom-left"
            }
        }).onChange(v => {
            notify.config.position = v;
            notify.updatePosition();
            notify.info(`Position changed to ${v}`);
        });

        gui.addSlider(settings, 'notifDuration', { min: 500, max: 10000, step: 500, name: "Duration (ms)" })
            .onChange(v => notify.config.duration = v);

        gui.addSeparator();

        gui.addButton("TRIGGER INFO", () => {
            notify.info("This is a standard information message.", "Information");
        });

        gui.addButton("TRIGGER SUCCESS", () => {
            notify.success("Operation completed successfully!", "Great Job");
        });

        gui.addButton("TRIGGER WARNING", () => {
            notify.warning("Something might be wrong...", "Attention");
        });

        gui.addButton("TRIGGER ERROR", () => {
            notify.error("Critical failure detected in system.", "Error 500");
        });

        // FOLDER: MONITOR
        gui.addFolder("System Monitor");
        const sysStats = { fps: 60, time: 0 };
        gui.addDisplay(sysStats, 'fps', { name: "FPS" }).listen();
        gui.addDisplay(sysStats, 'time', { name: "Run Time (s)" }).listen();

        // --- LOGIC ---
        function applySettings() {
            // Sync working copy to saving ref (hack for demo simplicity)
            // ideally we map them better, but this works for visual feedback
            const target = document.getElementById('target-object');
            const inner = document.getElementById('target-inner');

            target.style.transform = `scale(${settings.scale}) rotateY(${rotation}deg) rotateX(${rotation * 0.5}deg)`;

            // Colors
            target.style.background = `linear-gradient(135deg, ${settings.color}22, ${settings.color}44)`;
            target.style.borderColor = settings.borderColor;
            target.style.boxShadow = `0 0 ${settings.glowStrength}px ${settings.borderColor}44`;

            inner.style.color = settings.color;
            inner.style.textShadow = `0 0 10px ${settings.color}`;
            inner.innerText = settings.title;
        }

        // Animation Loop
        let rotation = 0;
        let lastTime = performance.now();
        let frameCount = 0;
        let lastFpsTime = lastTime;

        function animate(time) {
            requestAnimationFrame(animate);

            const delta = (time - lastTime) / 1000;
            lastTime = time;

            rotation += settings.rotationSpeed * 50 * delta; // speed factor

            const target = document.getElementById('target-object');
            target.style.transform = `scale(${settings.scale}) rotateY(${rotation}deg) rotateX(${rotation * 0.7}deg)`;

            // Stats
            sysStats.time = (time / 1000).toFixed(1);
            frameCount++;

            if (time - lastFpsTime >= 1000) {
                sysStats.fps = frameCount;
                frameCount = 0;
                lastFpsTime = time;
            }
        }

        // Init
        applySettings();
        animate(performance.now());

        // Welcome Toast
        setTimeout(() => {
            notify.info("Welcome to the Neon Framework Showcase", "System Ready");
        }, 500);

    </script>

</body>

</html>
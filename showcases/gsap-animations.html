<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSAP Animation Library</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .grid-bg {
            background-image: radial-gradient(#374151 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .origin-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #ef4444;
            border-radius: 50%;
            z-index: 10;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
        }
    </style>
</head>

<body class="bg-gray-900 text-gray-100 h-screen flex overflow-hidden">

    <!-- Sidebar / Controls -->
    <aside class="w-80 bg-gray-800 border-r border-gray-700 flex flex-col shadow-xl z-20">
        <div class="p-6 border-b border-gray-700">
            <h1 class="text-xl font-bold text-white mb-1">AnimLib GSAP</h1>
            <p class="text-xs text-gray-400">Reusable Animation System</p>
        </div>

        <div class="flex-1 overflow-y-auto p-6 space-y-8">

            <!-- Animation Selector -->
            <div class="space-y-3">
                <label class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Animation Type</label>
                <div class="grid grid-cols-2 gap-2" id="animButtons">
                    <!-- Buttons injected by JS -->
                </div>
            </div>

            <!-- Easing Selector -->
            <div class="space-y-3">
                <label class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Timing Function
                    (Bezier)</label>
                <select id="easingSelect"
                    class="w-full bg-gray-900 border border-gray-600 rounded px-3 py-2 text-sm focus:border-indigo-500 outline-none transition-colors">
                    <!-- Options injected by JS -->
                </select>
                <div id="bezierDisplay"
                    class="text-[10px] font-mono text-indigo-400 bg-indigo-900/20 p-2 rounded border border-indigo-900/50">
                </div>
            </div>

            <!-- Origin Selector -->
            <div class="space-y-3">
                <label class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Transform Origin
                    (Axis)</label>
                <div class="grid grid-cols-3 gap-2 p-2 bg-gray-900 rounded border border-gray-600 w-fit mx-auto">
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="0% 0%">‚Üñ</button>
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="50% 0%">‚Üë</button>
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="100% 0%">‚Üó</button>
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="0% 50%">‚Üê</button>
                    <button
                        class="origin-btn w-8 h-8 rounded bg-indigo-600 text-white flex items-center justify-center shadow-lg transform scale-110"
                        data-origin="50% 50%">‚Ä¢</button>
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="100% 50%">‚Üí</button>
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="0% 100%">‚Üô</button>
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="50% 100%">‚Üì</button>
                    <button
                        class="origin-btn w-8 h-8 rounded hover:bg-gray-700 flex items-center justify-center text-gray-500 transition-colors"
                        data-origin="100% 100%">‚Üò</button>
                </div>
            </div>

            <!-- Settings -->
            <div class="space-y-4 pt-4 border-t border-gray-700">
                <div class="flex justify-between items-center">
                    <label class="text-xs text-gray-400">Duration (s)</label>
                    <input type="number" id="durationInput" value="0.8" step="0.1" min="0.1" max="5"
                        class="w-16 bg-gray-900 border border-gray-600 rounded px-2 py-1 text-sm text-center">
                </div>
                <button id="resetBtn"
                    class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 rounded text-sm transition-colors">Reset
                    Elements</button>
            </div>
        </div>
    </aside>

    <!-- Main Stage -->
    <main class="flex-1 relative bg-gray-900 grid-bg flex flex-col items-center justify-center p-10 overflow-hidden">

        <div class="absolute top-6 right-6 flex gap-2">
            <div class="px-3 py-1 bg-indigo-600 rounded-full text-xs font-semibold shadow-lg shadow-indigo-500/30">
                Active Lib: V1.2 (Fixed)</div>
        </div>

        <!-- Demonstration Elements -->
        <div class="grid grid-cols-2 gap-12 w-full max-w-4xl">

            <!-- Element 1: Card -->
            <div
                class="anim-target group relative w-full aspect-video bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl border border-gray-700 shadow-2xl flex items-center justify-center cursor-pointer hover:border-indigo-500/50 transition-colors">
                <div class="origin-dot" id="dot-1"></div>
                <div class="text-center">
                    <div
                        class="w-12 h-12 bg-indigo-500 rounded-lg mx-auto mb-3 flex items-center justify-center text-xl">
                        üöÄ</div>
                    <h3 class="font-semibold text-gray-200">Card Component</h3>
                    <p class="text-xs text-gray-500 mt-1">Click to Animate Me</p>
                </div>
            </div>

            <!-- Element 2: Image/Box -->
            <div
                class="anim-target group relative w-full aspect-video bg-indigo-900/20 rounded-xl border border-indigo-500/30 backdrop-blur-sm flex items-center justify-center cursor-pointer overflow-hidden">
                <div class="origin-dot" id="dot-2"></div>
                <div class="absolute inset-0 bg-gradient-to-tr from-indigo-600/20 to-purple-600/20"></div>
                <span class="text-4xl font-black text-indigo-500/50 uppercase tracking-widest z-10">Glass</span>
            </div>

            <!-- Element 3: Text Block -->
            <div
                class="anim-target group relative w-full aspect-video bg-gray-800 rounded-xl border border-gray-700 p-6 flex flex-col justify-between cursor-pointer">
                <div class="origin-dot" id="dot-3"></div>
                <div class="h-2 w-1/3 bg-gray-600 rounded"></div>
                <div class="space-y-2">
                    <div class="h-2 w-full bg-gray-700 rounded"></div>
                    <div class="h-2 w-5/6 bg-gray-700 rounded"></div>
                    <div class="h-2 w-4/6 bg-gray-700 rounded"></div>
                </div>
            </div>

            <!-- Element 4: Circle -->
            <div class="flex items-center justify-center">
                <div
                    class="anim-target relative w-40 h-40 rounded-full bg-gradient-to-r from-pink-500 to-rose-500 shadow-lg shadow-rose-500/30 flex items-center justify-center cursor-pointer border-4 border-gray-800">
                    <div class="origin-dot" id="dot-4"></div>
                    <span class="font-bold text-white">Circle</span>
                </div>
            </div>

        </div>

        <div class="mt-12 text-center opacity-50 text-sm">
            <p>Select settings on the left, then click any element above.</p>
        </div>

    </main>

    <script type="module">
        // --- 1. CONFIGURATION & DATA ---

        // --- 1. SETUP ---
        import { AnimLib, ANIMATIONS, EASINGS } from '../libs/gsap-animations.js';

        // --- 2. UI CONTROLLER LOGIC ---

        // State
        let selectedAnim = 'glitch'; // Default to one of the new ones
        let selectedEase = 'Power3';
        const elements = document.querySelectorAll('.anim-target');

        // Init UI
        const animContainer = document.getElementById('animButtons');
        const easingSelect = document.getElementById('easingSelect');
        const bezierDisplay = document.getElementById('bezierDisplay');
        const originButtons = document.querySelectorAll('.origin-btn');
        const dots = document.querySelectorAll('.origin-dot');

        // Render Animation Buttons
        Object.keys(ANIMATIONS).forEach(key => {
            const btn = document.createElement('button');
            btn.className = `text-left px-3 py-2 rounded text-xs transition-colors border border-transparent ${key === selectedAnim ? 'bg-indigo-600 text-white border-indigo-400' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`;
            // Format Title
            btn.textContent = key
                .replace(/([A-Z])/g, ' $1') // Camel to Title
                .replace(/^./, str => str.toUpperCase()); // Capitalize first

            btn.onclick = () => {
                document.querySelectorAll('#animButtons button').forEach(b => {
                    b.className = 'text-left px-3 py-2 rounded text-xs transition-colors border border-transparent bg-gray-700 text-gray-300 hover:bg-gray-600';
                });
                btn.className = 'text-left px-3 py-2 rounded text-xs transition-colors border border-indigo-400 bg-indigo-600 text-white';
                selectedAnim = key;

                // Auto-select "Steps" for Typewriter for better UX
                if (key === 'typewriter' && selectedEase !== 'Steps (12)') {
                    easingSelect.value = 'Steps (12)';
                    easingSelect.dispatchEvent(new Event('change'));
                }

                triggerAll();
            };
            animContainer.appendChild(btn);
        });

        // Render Easing Options
        Object.keys(EASINGS).forEach(key => {
            const opt = document.createElement('option');
            opt.value = key;
            opt.textContent = key;
            easingSelect.appendChild(opt);
        });

        // Easing Change Handler
        easingSelect.addEventListener('change', (e) => {
            selectedEase = e.target.value;
            const val = EASINGS[selectedEase];
            bezierDisplay.textContent = `GSAP: ${val}`;
            triggerAll();
        });

        // Initial Easing Display
        bezierDisplay.textContent = `GSAP: ${EASINGS[selectedEase]}`;

        // Transform Origin Handler
        function updateDots(originVal) {
            const [x, y] = originVal.split(' ');
            dots.forEach(dot => {
                dot.style.left = x;
                dot.style.top = y;
            });
        }

        originButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                // Style update
                originButtons.forEach(b => {
                    b.classList.remove('bg-indigo-600', 'text-white', 'shadow-lg', 'scale-110');
                    b.classList.add('text-gray-500', 'hover:bg-gray-700');
                });
                btn.classList.remove('text-gray-500', 'hover:bg-gray-700');
                btn.classList.add('bg-indigo-600', 'text-white', 'shadow-lg', 'scale-110');

                // Logic update
                const newOrigin = btn.dataset.origin;
                AnimLib.setOrigin(newOrigin);
                updateDots(newOrigin);
            });
        });

        // Main Trigger Function
        function triggerAnim(el) {
            const duration = parseFloat(document.getElementById('durationInput').value) || 0.8;
            AnimLib.animate(el, selectedAnim, {
                duration: duration,
                ease: EASINGS[selectedEase]
            });
        }

        function triggerAll() {
            elements.forEach((el, i) => {
                // Stagger slightly
                setTimeout(() => triggerAnim(el), i * 100);
            });
        }

        // Element Click Listeners
        elements.forEach(el => {
            el.addEventListener('click', () => triggerAnim(el));
        });

        // Reset Button
        document.getElementById('resetBtn').addEventListener('click', () => {
            AnimLib.reset(elements);
        });

        // Initial setup
        updateDots('50% 50%');

    </script>
</body>

</html>